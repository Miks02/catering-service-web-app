<!doctype html>
<html lang="sr" xmlns:th="http://www.thymeleaf.org" th:with="pageTitle='Katalog - Naša Ponuda'">
<head th:replace="~{layouts/base :: head}"></head>
<body>

<div th:replace="~{layouts/base :: navbar}"></div>

<section class="hero-section mini-hero p-5">
    <div class="hero-overlay"></div>
    <div class="hero-content">
        <div class="container text-center text-white">
            <h1 class="display-5 fw-bold mb-2" th:text="${heroTitle}"></h1>
            <p class="lead mb-0" th:text="${heroSubtitle}"></p>
        </div>
    </div>
</section>
<div class="catalog-container">
    <div class="container">
        <div class="row">
            <div class="col-lg-3">
                <div class="filter-sidebar">
                    <div class="filter-header">
                        <i class="bi bi-funnel"></i>
                        <h4>Filteri</h4>
                    </div>

                    <div class="filter-section">
                        <h5>
                            <i class="bi bi-bookmark"></i>
                            Tip Proizvoda
                        </h5>
                        <div class="filter-option">
                            <input type="checkbox" id="filter-slatko" name="type" value="slatko" checked>
                            <label for="filter-slatko">Slatko</label>
                            <span class="filter-count">12</span>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" id="filter-slano" name="type" value="slano" checked>
                            <label for="filter-slano">Slano</label>
                            <span class="filter-count">18</span>
                        </div>
                    </div>

                    <hr class="filter-divider">

                    <div class="filter-section">
                        <h5>
                            <i class="bi bi-calendar-event"></i>
                            Vrsta Proslave
                        </h5>
                        <div class="filter-option">
                            <input type="radio" id="filter-sve" name="occasion" value="sve" checked>
                            <label for="filter-sve">Sve proslave</label>
                        </div>
                        <div class="filter-option">
                            <input type="radio" id="filter-vencanje" name="occasion" value="vencanje">
                            <label for="filter-vencanje">Venčanje</label>
                            <span class="filter-count">8</span>
                        </div>
                        <div class="filter-option">
                            <input type="radio" id="filter-rodjendani" name="occasion" value="rodjendani">
                            <label for="filter-rodjendani">Rođendan</label>
                            <span class="filter-count">10</span>
                        </div>
                        <div class="filter-option">
                            <input type="radio" id="filter-korporativni" name="occasion" value="korporativni">
                            <label for="filter-korporativni">Korporativni događaji</label>
                            <span class="filter-count">6</span>
                        </div>
                        <div class="filter-option">
                            <input type="radio" id="filter-privatno" name="occasion" value="privatno">
                            <label for="filter-privatno">Privatne proslave</label>
                            <span class="filter-count">12</span>
                        </div>
                    </div>

                    <hr class="filter-divider">

                    <div class="filter-section">
                        <h5>
                            <i class="bi bi-currency-exchange"></i>
                            Cenovni Opseg
                        </h5>
                        <div class="filter-option">
                            <input type="checkbox" id="filter-price1" name="price" value="0-5000">
                            <label for="filter-price1">Do 5.000 RSD</label>
                            <span class="filter-count">8</span>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" id="filter-price2" name="price" value="5000-10000">
                            <label for="filter-price2">5.000 - 10.000 RSD</label>
                            <span class="filter-count">12</span>
                        </div>
                        <div class="filter-option">
                            <input type="checkbox" id="filter-price3" name="price" value="10000+">
                            <label for="filter-price3">Preko 10.000 RSD</label>
                            <span class="filter-count">10</span>
                        </div>
                    </div>

                    <hr class="filter-divider">

                    <button class="btn-clear-filters" onclick="clearFilters()">
                        <i class="bi bi-x-circle me-2"></i>
                        Poništi filtere
                    </button>
                </div>
            </div>

            <div class="col-lg-9">
                <div class="products-header">
                    <div class="products-count">
                        Prikazano <strong id="shown-count">30</strong> od <strong>30</strong> proizvoda
                    </div>
                    <select class="sort-select" id="sort-select" onchange="sortProducts()">
                        <option value="default">Sortiraj po</option>
                        <option value="price-asc">Cena: Najniža</option>
                        <option value="price-desc">Cena: Najviša</option>
                        <option value="name-asc">Ime: A-Z</option>
                        <option value="name-desc">Ime: Z-A</option>
                        <option value="rating">Najbolje ocenjeno</option>
                    </select>
                </div>

                <!-- Products Grid -->
                <div class="row g-4" id="products-grid">
                    <!-- Product Card 1 -->
                    <div class="col-lg-4 col-md-6 product-item" data-type="slatko" data-occasion="vencanje rodjendani" data-price="8500">
                        <div class="product-card">
                            <div class="product-image">
                                <span class="product-badge badge-popular">Popularno</span>
                                <img src="https://images.unsplash.com/photo-1464349095431-e9a21285b5f3?w=500" alt="Torta">
                                <div class="product-quick-view">
                                    <button class="btn-quick-view">
                                        <i class="bi bi-eye"></i> Brzi pregled
                                    </button>
                                </div>
                            </div>
                            <div class="product-body">
                                <span class="product-category">Slatko</span>
                                <h3 class="product-title">Svečana Torta Deluxe</h3>
                                <p class="product-description">
                                    Luksuzna trodelna torta sa kremom od vanile i čokolade, ukrašena svežim voćem i zlatnim detaljima.
                                </p>
                                <div class="product-meta">
                                    <div class="product-rating">
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-half"></i>
                                        <span>4.8</span>
                                    </div>
                                    <span class="product-reviews">(127 recenzija)</span>
                                </div>
                                <div class="product-footer">
                                    <div class="product-price">8.500 RSD</div>
                                    <button class="btn-add-cart" onclick="addToCart('Svečana Torta Deluxe', 8500)">
                                        <i class="bi bi-cart-plus"></i>
                                        Dodaj
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Product Card 2 -->
                    <div class="col-lg-4 col-md-6 product-item" data-type="slano" data-occasion="korporativni privatno" data-price="12500">
                        <div class="product-card">
                            <div class="product-image">
                                <span class="product-badge badge-new">Novo</span>
                                <img src="https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=500" alt="Grill Platter">
                                <div class="product-quick-view">
                                    <button class="btn-quick-view">
                                        <i class="bi bi-eye"></i> Brzi pregled
                                    </button>
                                </div>
                            </div>
                            <div class="product-body">
                                <span class="product-category">Slano</span>
                                <h3 class="product-title">Grill Plata Premium</h3>
                                <p class="product-description">
                                    Izbor različitih vrsta mesa sa roštilja, pečenih povrća i sousa. Idealno za 20 osoba.
                                </p>
                                <div class="product-meta">
                                    <div class="product-rating">
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <span>5.0</span>
                                    </div>
                                    <span class="product-reviews">(89 recenzija)</span>
                                </div>
                                <div class="product-footer">
                                    <div class="product-price">12.500 RSD</div>
                                    <button class="btn-add-cart" onclick="addToCart('Grill Plata Premium', 12500)">
                                        <i class="bi bi-cart-plus"></i>
                                        Dodaj
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Product Card 3 -->
                    <div class="col-lg-4 col-md-6 product-item" data-type="slatko" data-occasion="rodjendani privatno" data-price="4200">
                        <div class="product-card">
                            <div class="product-image">
                                <img src="https://images.unsplash.com/photo-1571877227200-a0d98ea607e9?w=500" alt="Cupcakes">
                                <div class="product-quick-view">
                                    <button class="btn-quick-view">
                                        <i class="bi bi-eye"></i> Brzi pregled
                                    </button>
                                </div>
                            </div>
                            <div class="product-body">
                                <span class="product-category">Slatko</span>
                                <h3 class="product-title">Kolač Set (12 kom)</h3>
                                <p class="product-description">
                                    Asortiman od 12 mini kolačića različitih ukusa - čokolada, vanila, jagoda i limun.
                                </p>
                                <div class="product-meta">
                                    <div class="product-rating">
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star"></i>
                                        <span>4.5</span>
                                    </div>
                                    <span class="product-reviews">(64 recenzije)</span>
                                </div>
                                <div class="product-footer">
                                    <div class="product-price">4.200 RSD</div>
                                    <button class="btn-add-cart" onclick="addToCart('Kolač Set', 4200)">
                                        <i class="bi bi-cart-plus"></i>
                                        Dodaj
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Product Card 4 -->
                    <div class="col-lg-4 col-md-6 product-item" data-type="slano" data-occasion="vencanje korporativni" data-price="9800">
                        <div class="product-card">
                            <div class="product-image">
                                <span class="product-badge badge-popular">Popularno</span>
                                <img src="https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=500" alt="Pasta">
                                <div class="product-quick-view">
                                    <button class="btn-quick-view">
                                        <i class="bi bi-eye"></i> Brzi pregled
                                    </button>
                                </div>
                            </div>
                            <div class="product-body">
                                <span class="product-category">Slano</span>
                                <h3 class="product-title">Italijanski Pasta Bar</h3>
                                <p class="product-description">
                                    Izbor 4 vrste paste sa različitim sosovima - karbonara, bolonjeze, pesto i alfredo.
                                </p>
                                <div class="product-meta">
                                    <div class="product-rating">
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-half"></i>
                                        <span>4.7</span>
                                    </div>
                                    <span class="product-reviews">(143 recenzije)</span>
                                </div>
                                <div class="product-footer">
                                    <div class="product-price">9.800 RSD</div>
                                    <button class="btn-add-cart" onclick="addToCart('Italijanski Pasta Bar', 9800)">
                                        <i class="bi bi-cart-plus"></i>
                                        Dodaj
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Product Card 5 -->
                    <div class="col-lg-4 col-md-6 product-item" data-type="slatko" data-occasion="vencanje rodjendani" data-price="6700">
                        <div class="product-card">
                            <div class="product-image">
                                <span class="product-badge badge-sale">-20%</span>
                                <img src="https://images.unsplash.com/photo-1516834474-48c0abc2a902?w=500" alt="Desert">
                                <div class="product-quick-view">
                                    <button class="btn-quick-view">
                                        <i class="bi bi-eye"></i> Brzi pregled
                                    </button>
                                </div>
                            </div>
                            <div class="product-body">
                                <span class="product-category">Slatko</span>
                                <h3 class="product-title">Desert Plata Mix</h3>
                                <p class="product-description">
                                    Kombinacija raznovrsnih deserta - tiramisu, panna cotta, mousse i mini éclairs.
                                </p>
                                <div class="product-meta">
                                    <div class="product-rating">
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star"></i>
                                        <span>4.6</span>
                                    </div>
                                    <span class="product-reviews">(98 recenzija)</span>
                                </div>
                                <div class="product-footer">
                                    <div class="product-price">6.700 RSD</div>
                                    <button class="btn-add-cart" onclick="addToCart('Desert Plata Mix', 6700)">
                                        <i class="bi bi-cart-plus"></i>
                                        Dodaj
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Product Card 6 -->
                    <div class="col-lg-4 col-md-6 product-item" data-type="slano" data-occasion="korporativni privatno" data-price="5400">
                        <div class="product-card">
                            <div class="product-image">
                                <img src="https://images.unsplash.com/photo-1513104890138-7c749659a591?w=500" alt="Pizza">
                                <div class="product-quick-view">
                                    <button class="btn-quick-view">
                                        <i class="bi bi-eye"></i> Brzi pregled
                                    </button>
                                </div>
                            </div>
                            <div class="product-body">
                                <span class="product-category">Slano</span>
                                <h3 class="product-title">Pizza Paket (5 pica)</h3>
                                <p class="product-description">
                                    Pet različitih pizza - margherita, quattro formaggi, prosciutto, vegetariana i kapri.
                                </p>
                                <div class="product-meta">
                                    <div class="product-rating">
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <span>4.9</span>
                                    </div>
                                    <span class="product-reviews">(215 recenzija)</span>
                                </div>
                                <div class="product-footer">
                                    <div class="product-price">5.400 RSD</div>
                                    <button class="btn-add-cart" onclick="addToCart('Pizza Paket', 5400)">
                                        <i class="bi bi-cart-plus"></i>
                                        Dodaj
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Footer -->
<div th:replace="~{layouts/base :: footer}"></div>

<!-- Scripts -->
<div th:replace="~{layouts/base :: scripts}"></div>

<script>
    // Filter Products
    function filterProducts() {
        const typeFilters = Array.from(document.querySelectorAll('input[name="type"]:checked')).map(el => el.value);
        const occasionFilter = document.querySelector('input[name="occasion"]:checked').value;
        const priceFilters = Array.from(document.querySelectorAll('input[name="price"]:checked')).map(el => el.value);

        const products = document.querySelectorAll('.product-item');
        let visibleCount = 0;

        products.forEach(product => {
            const productType = product.dataset.type;
            const productOccasions = product.dataset.occasion.split(' ');
            const productPrice = parseInt(product.dataset.price);

            let typeMatch = typeFilters.length === 0 || typeFilters.includes(productType);
            let occasionMatch = occasionFilter === 'sve' || productOccasions.includes(occasionFilter);

            let priceMatch = true;
            if (priceFilters.length > 0) {
                priceMatch = priceFilters.some(range => {
                    if (range === '0-5000') return productPrice <= 5000;
                    if (range === '5000-10000') return productPrice > 5000 && productPrice <= 10000;
                    if (range === '10000+') return productPrice > 10000;
                    return false;
                });
            }

            if (typeMatch && occasionMatch && priceMatch) {
                product.style.display = 'block';
                visibleCount++;
            } else {
                product.style.display = 'none';
            }
        });

        document.getElementById('shown-count').textContent = visibleCount;
    }

    function sortProducts() {
        const sortValue = document.getElementById('sort-select').value;
        const grid = document.getElementById('products-grid');
        const products = Array.from(grid.querySelectorAll('.product-item'));

        products.sort((a, b) => {
            switch(sortValue) {
                case 'price-asc':
                    return parseInt(a.dataset.price) - parseInt(b.dataset.price);
                case 'price-desc':
                    return parseInt(b.dataset.price) - parseInt(a.dataset.price);
                case 'name-asc':
                    return a.querySelector('.product-title').textContent.localeCompare(b.querySelector('.product-title').textContent);
                case 'name-desc':
                    return b.querySelector('.product-title').textContent.localeCompare(a.querySelector('.product-title').textContent);
                default:
                    return 0;
            }
        });

        products.forEach(product => grid.appendChild(product));
    }

    function clearFilters() {
        document.querySelectorAll('input[name="type"]').forEach(el => el.checked = true);
        document.querySelector('input[value="sve"]').checked = true;
        document.querySelectorAll('input[name="price"]').forEach(el => el.checked = false);
        filterProducts();
    }

    function addToCart(productName, price) {
        const toast = document.createElement('div');
        toast.className = 'cart-toast';
        toast.innerHTML = `
            <i class="bi bi-check-circle-fill"></i>
            <div class="toast-content">
                <h6>Dodato u korpu!</h6>
                <p>${productName} - ${price.toLocaleString()} RSD</p>
            </div>
            <button class="btn-close-toast" onclick="this.parentElement.remove()">
                <i class="bi bi-x"></i>
            </button>
        `;

        document.body.appendChild(toast);

        // Auto remove after 3 seconds
        setTimeout(() => {
            toast.remove();
        }, 3000);

        // Here you would add actual cart logic
        console.log('Added to cart:', productName, price);
    }

    // Attach filter listeners
    document.querySelectorAll('input[name="type"], input[name="occasion"], input[name="price"]').forEach(input => {
        input.addEventListener('change', filterProducts);
    });
</script>

</body>
</html>